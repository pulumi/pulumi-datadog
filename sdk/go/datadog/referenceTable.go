// Code generated by pulumi-language-go DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package datadog

import (
	"context"
	"reflect"

	"errors"
	"github.com/pulumi/pulumi-datadog/sdk/v4/go/datadog/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// Provides a Datadog Reference Table resource for cloud storage sources (S3, GCS, Azure). This can be used to create and manage Datadog reference tables that sync data from cloud storage. For setup instructions including granting Datadog read access to your cloud storage bucket, see the [Reference Tables documentation](https://docs.datadoghq.com/reference_tables/?tab=cloudstorage#create-a-reference-table).
//
// ## Example Usage
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi-datadog/sdk/v4/go/datadog"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			// Create a reference table from an S3 bucket
//			_, err := datadog.NewReferenceTable(ctx, "s3_table", &datadog.ReferenceTableArgs{
//				TableName:   pulumi.String("products_catalog"),
//				Description: pulumi.String("Product catalog synced from S3"),
//				Source:      pulumi.String("S3"),
//				FileMetadata: datadog.ReferenceTableFileMetadataArgs{
//					map[string]interface{}{
//						"syncEnabled": true,
//						"accessDetails": []map[string]interface{}{
//							map[string]interface{}{
//								"awsDetail": []map[string]interface{}{
//									map[string]interface{}{
//										"awsAccountId":  "123456789000",
//										"awsBucketName": "my-data-bucket",
//										"filePath":      "reference-tables/products.csv",
//									},
//								},
//							},
//						},
//					},
//				},
//				Schema: datadog.ReferenceTableSchemaArgs{
//					map[string]interface{}{
//						"primaryKeys": []string{
//							"product_id",
//						},
//						"fields": []map[string]interface{}{
//							map[string]interface{}{
//								"name": "product_id",
//								"type": "STRING",
//							},
//							map[string]interface{}{
//								"name": "product_name",
//								"type": "STRING",
//							},
//							map[string]interface{}{
//								"name": "category",
//								"type": "STRING",
//							},
//							map[string]interface{}{
//								"name": "price_cents",
//								"type": "INT32",
//							},
//						},
//					},
//				},
//				Tags: pulumi.StringArray{
//					pulumi.String("source:s3"),
//					pulumi.String("team:catalog"),
//					pulumi.String("env:production"),
//				},
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// ## Import
//
// The `pulumi import` command can be used, for example:
//
// #!/bin/bash
//
// # Import an existing reference table by its UUID
//
// ```sh
// $ pulumi import datadog:index/referenceTable:ReferenceTable imported_table "00000000-0000-0000-0000-000000000000"
// ```
//
// After importing, add the resource configuration to your .tf file:
//
// resource "datadog_reference_table" "imported_table" {
//
//	table_name  = "existing_table"
//
//	description = "Previously created table"
//
//	source      = "S3"  # or "GCS" or "AZURE"
//
//	file_metadata {
//
//	  sync_enabled = true
//
//	  access_details {
//
//	    aws_detail {
//
//	      aws_account_id  = "123456789000"
//
//	      aws_bucket_name = "existing-bucket"
//
//	      file_path       = "data/existing.csv"
//
//	    }
//
//	  }
//
//	}
//
//	schema {
//
//	  primary_keys = ["id"]
//
//	  fields {
//
//	    name = "id"
//
//	    type = "STRING"
//
//	  }
//
//	  fields {
//
//	    name = "value"
//
//	    type = "STRING"
//
//	  }
//
//	}
//
//	tags = ["imported:true"]
//
// }
type ReferenceTable struct {
	pulumi.CustomResourceState

	// UUID of the user who created the reference table.
	CreatedBy pulumi.StringOutput `pulumi:"createdBy"`
	// The description of the reference table.
	Description pulumi.StringPtrOutput `pulumi:"description"`
	// Configuration for cloud storage file access and sync settings.
	FileMetadata ReferenceTableFileMetadataPtrOutput `pulumi:"fileMetadata"`
	// UUID of the user who last updated the reference table.
	LastUpdatedBy pulumi.StringOutput `pulumi:"lastUpdatedBy"`
	// The number of successfully processed rows in the reference table.
	RowCount pulumi.IntOutput `pulumi:"rowCount"`
	// The schema definition for the reference table, including field definitions and primary keys. Schema is only set on create; updates are derived from the file asynchronously.
	Schema ReferenceTableSchemaPtrOutput `pulumi:"schema"`
	// The source type for the reference table. Valid values are `S3`, `GCS`, `AZURE`.
	Source pulumi.StringOutput `pulumi:"source"`
	// The status of the reference table (e.g., DONE, PROCESSING, ERROR).
	Status pulumi.StringOutput `pulumi:"status"`
	// The name of the reference table. This must be unique within your organization.
	TableName pulumi.StringOutput `pulumi:"tableName"`
	// A list of tags to associate with the reference table.
	Tags pulumi.StringArrayOutput `pulumi:"tags"`
	// The timestamp of the last update to the reference table in ISO 8601 format.
	UpdatedAt pulumi.StringOutput `pulumi:"updatedAt"`
}

// NewReferenceTable registers a new resource with the given unique name, arguments, and options.
func NewReferenceTable(ctx *pulumi.Context,
	name string, args *ReferenceTableArgs, opts ...pulumi.ResourceOption) (*ReferenceTable, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.Source == nil {
		return nil, errors.New("invalid value for required argument 'Source'")
	}
	if args.TableName == nil {
		return nil, errors.New("invalid value for required argument 'TableName'")
	}
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource ReferenceTable
	err := ctx.RegisterResource("datadog:index/referenceTable:ReferenceTable", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetReferenceTable gets an existing ReferenceTable resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetReferenceTable(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *ReferenceTableState, opts ...pulumi.ResourceOption) (*ReferenceTable, error) {
	var resource ReferenceTable
	err := ctx.ReadResource("datadog:index/referenceTable:ReferenceTable", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering ReferenceTable resources.
type referenceTableState struct {
	// UUID of the user who created the reference table.
	CreatedBy *string `pulumi:"createdBy"`
	// The description of the reference table.
	Description *string `pulumi:"description"`
	// Configuration for cloud storage file access and sync settings.
	FileMetadata *ReferenceTableFileMetadata `pulumi:"fileMetadata"`
	// UUID of the user who last updated the reference table.
	LastUpdatedBy *string `pulumi:"lastUpdatedBy"`
	// The number of successfully processed rows in the reference table.
	RowCount *int `pulumi:"rowCount"`
	// The schema definition for the reference table, including field definitions and primary keys. Schema is only set on create; updates are derived from the file asynchronously.
	Schema *ReferenceTableSchema `pulumi:"schema"`
	// The source type for the reference table. Valid values are `S3`, `GCS`, `AZURE`.
	Source *string `pulumi:"source"`
	// The status of the reference table (e.g., DONE, PROCESSING, ERROR).
	Status *string `pulumi:"status"`
	// The name of the reference table. This must be unique within your organization.
	TableName *string `pulumi:"tableName"`
	// A list of tags to associate with the reference table.
	Tags []string `pulumi:"tags"`
	// The timestamp of the last update to the reference table in ISO 8601 format.
	UpdatedAt *string `pulumi:"updatedAt"`
}

type ReferenceTableState struct {
	// UUID of the user who created the reference table.
	CreatedBy pulumi.StringPtrInput
	// The description of the reference table.
	Description pulumi.StringPtrInput
	// Configuration for cloud storage file access and sync settings.
	FileMetadata ReferenceTableFileMetadataPtrInput
	// UUID of the user who last updated the reference table.
	LastUpdatedBy pulumi.StringPtrInput
	// The number of successfully processed rows in the reference table.
	RowCount pulumi.IntPtrInput
	// The schema definition for the reference table, including field definitions and primary keys. Schema is only set on create; updates are derived from the file asynchronously.
	Schema ReferenceTableSchemaPtrInput
	// The source type for the reference table. Valid values are `S3`, `GCS`, `AZURE`.
	Source pulumi.StringPtrInput
	// The status of the reference table (e.g., DONE, PROCESSING, ERROR).
	Status pulumi.StringPtrInput
	// The name of the reference table. This must be unique within your organization.
	TableName pulumi.StringPtrInput
	// A list of tags to associate with the reference table.
	Tags pulumi.StringArrayInput
	// The timestamp of the last update to the reference table in ISO 8601 format.
	UpdatedAt pulumi.StringPtrInput
}

func (ReferenceTableState) ElementType() reflect.Type {
	return reflect.TypeOf((*referenceTableState)(nil)).Elem()
}

type referenceTableArgs struct {
	// The description of the reference table.
	Description *string `pulumi:"description"`
	// Configuration for cloud storage file access and sync settings.
	FileMetadata *ReferenceTableFileMetadata `pulumi:"fileMetadata"`
	// The schema definition for the reference table, including field definitions and primary keys. Schema is only set on create; updates are derived from the file asynchronously.
	Schema *ReferenceTableSchema `pulumi:"schema"`
	// The source type for the reference table. Valid values are `S3`, `GCS`, `AZURE`.
	Source string `pulumi:"source"`
	// The name of the reference table. This must be unique within your organization.
	TableName string `pulumi:"tableName"`
	// A list of tags to associate with the reference table.
	Tags []string `pulumi:"tags"`
}

// The set of arguments for constructing a ReferenceTable resource.
type ReferenceTableArgs struct {
	// The description of the reference table.
	Description pulumi.StringPtrInput
	// Configuration for cloud storage file access and sync settings.
	FileMetadata ReferenceTableFileMetadataPtrInput
	// The schema definition for the reference table, including field definitions and primary keys. Schema is only set on create; updates are derived from the file asynchronously.
	Schema ReferenceTableSchemaPtrInput
	// The source type for the reference table. Valid values are `S3`, `GCS`, `AZURE`.
	Source pulumi.StringInput
	// The name of the reference table. This must be unique within your organization.
	TableName pulumi.StringInput
	// A list of tags to associate with the reference table.
	Tags pulumi.StringArrayInput
}

func (ReferenceTableArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*referenceTableArgs)(nil)).Elem()
}

type ReferenceTableInput interface {
	pulumi.Input

	ToReferenceTableOutput() ReferenceTableOutput
	ToReferenceTableOutputWithContext(ctx context.Context) ReferenceTableOutput
}

func (*ReferenceTable) ElementType() reflect.Type {
	return reflect.TypeOf((**ReferenceTable)(nil)).Elem()
}

func (i *ReferenceTable) ToReferenceTableOutput() ReferenceTableOutput {
	return i.ToReferenceTableOutputWithContext(context.Background())
}

func (i *ReferenceTable) ToReferenceTableOutputWithContext(ctx context.Context) ReferenceTableOutput {
	return pulumi.ToOutputWithContext(ctx, i).(ReferenceTableOutput)
}

// ReferenceTableArrayInput is an input type that accepts ReferenceTableArray and ReferenceTableArrayOutput values.
// You can construct a concrete instance of `ReferenceTableArrayInput` via:
//
//	ReferenceTableArray{ ReferenceTableArgs{...} }
type ReferenceTableArrayInput interface {
	pulumi.Input

	ToReferenceTableArrayOutput() ReferenceTableArrayOutput
	ToReferenceTableArrayOutputWithContext(context.Context) ReferenceTableArrayOutput
}

type ReferenceTableArray []ReferenceTableInput

func (ReferenceTableArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*ReferenceTable)(nil)).Elem()
}

func (i ReferenceTableArray) ToReferenceTableArrayOutput() ReferenceTableArrayOutput {
	return i.ToReferenceTableArrayOutputWithContext(context.Background())
}

func (i ReferenceTableArray) ToReferenceTableArrayOutputWithContext(ctx context.Context) ReferenceTableArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(ReferenceTableArrayOutput)
}

// ReferenceTableMapInput is an input type that accepts ReferenceTableMap and ReferenceTableMapOutput values.
// You can construct a concrete instance of `ReferenceTableMapInput` via:
//
//	ReferenceTableMap{ "key": ReferenceTableArgs{...} }
type ReferenceTableMapInput interface {
	pulumi.Input

	ToReferenceTableMapOutput() ReferenceTableMapOutput
	ToReferenceTableMapOutputWithContext(context.Context) ReferenceTableMapOutput
}

type ReferenceTableMap map[string]ReferenceTableInput

func (ReferenceTableMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*ReferenceTable)(nil)).Elem()
}

func (i ReferenceTableMap) ToReferenceTableMapOutput() ReferenceTableMapOutput {
	return i.ToReferenceTableMapOutputWithContext(context.Background())
}

func (i ReferenceTableMap) ToReferenceTableMapOutputWithContext(ctx context.Context) ReferenceTableMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(ReferenceTableMapOutput)
}

type ReferenceTableOutput struct{ *pulumi.OutputState }

func (ReferenceTableOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**ReferenceTable)(nil)).Elem()
}

func (o ReferenceTableOutput) ToReferenceTableOutput() ReferenceTableOutput {
	return o
}

func (o ReferenceTableOutput) ToReferenceTableOutputWithContext(ctx context.Context) ReferenceTableOutput {
	return o
}

// UUID of the user who created the reference table.
func (o ReferenceTableOutput) CreatedBy() pulumi.StringOutput {
	return o.ApplyT(func(v *ReferenceTable) pulumi.StringOutput { return v.CreatedBy }).(pulumi.StringOutput)
}

// The description of the reference table.
func (o ReferenceTableOutput) Description() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *ReferenceTable) pulumi.StringPtrOutput { return v.Description }).(pulumi.StringPtrOutput)
}

// Configuration for cloud storage file access and sync settings.
func (o ReferenceTableOutput) FileMetadata() ReferenceTableFileMetadataPtrOutput {
	return o.ApplyT(func(v *ReferenceTable) ReferenceTableFileMetadataPtrOutput { return v.FileMetadata }).(ReferenceTableFileMetadataPtrOutput)
}

// UUID of the user who last updated the reference table.
func (o ReferenceTableOutput) LastUpdatedBy() pulumi.StringOutput {
	return o.ApplyT(func(v *ReferenceTable) pulumi.StringOutput { return v.LastUpdatedBy }).(pulumi.StringOutput)
}

// The number of successfully processed rows in the reference table.
func (o ReferenceTableOutput) RowCount() pulumi.IntOutput {
	return o.ApplyT(func(v *ReferenceTable) pulumi.IntOutput { return v.RowCount }).(pulumi.IntOutput)
}

// The schema definition for the reference table, including field definitions and primary keys. Schema is only set on create; updates are derived from the file asynchronously.
func (o ReferenceTableOutput) Schema() ReferenceTableSchemaPtrOutput {
	return o.ApplyT(func(v *ReferenceTable) ReferenceTableSchemaPtrOutput { return v.Schema }).(ReferenceTableSchemaPtrOutput)
}

// The source type for the reference table. Valid values are `S3`, `GCS`, `AZURE`.
func (o ReferenceTableOutput) Source() pulumi.StringOutput {
	return o.ApplyT(func(v *ReferenceTable) pulumi.StringOutput { return v.Source }).(pulumi.StringOutput)
}

// The status of the reference table (e.g., DONE, PROCESSING, ERROR).
func (o ReferenceTableOutput) Status() pulumi.StringOutput {
	return o.ApplyT(func(v *ReferenceTable) pulumi.StringOutput { return v.Status }).(pulumi.StringOutput)
}

// The name of the reference table. This must be unique within your organization.
func (o ReferenceTableOutput) TableName() pulumi.StringOutput {
	return o.ApplyT(func(v *ReferenceTable) pulumi.StringOutput { return v.TableName }).(pulumi.StringOutput)
}

// A list of tags to associate with the reference table.
func (o ReferenceTableOutput) Tags() pulumi.StringArrayOutput {
	return o.ApplyT(func(v *ReferenceTable) pulumi.StringArrayOutput { return v.Tags }).(pulumi.StringArrayOutput)
}

// The timestamp of the last update to the reference table in ISO 8601 format.
func (o ReferenceTableOutput) UpdatedAt() pulumi.StringOutput {
	return o.ApplyT(func(v *ReferenceTable) pulumi.StringOutput { return v.UpdatedAt }).(pulumi.StringOutput)
}

type ReferenceTableArrayOutput struct{ *pulumi.OutputState }

func (ReferenceTableArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*ReferenceTable)(nil)).Elem()
}

func (o ReferenceTableArrayOutput) ToReferenceTableArrayOutput() ReferenceTableArrayOutput {
	return o
}

func (o ReferenceTableArrayOutput) ToReferenceTableArrayOutputWithContext(ctx context.Context) ReferenceTableArrayOutput {
	return o
}

func (o ReferenceTableArrayOutput) Index(i pulumi.IntInput) ReferenceTableOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *ReferenceTable {
		return vs[0].([]*ReferenceTable)[vs[1].(int)]
	}).(ReferenceTableOutput)
}

type ReferenceTableMapOutput struct{ *pulumi.OutputState }

func (ReferenceTableMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*ReferenceTable)(nil)).Elem()
}

func (o ReferenceTableMapOutput) ToReferenceTableMapOutput() ReferenceTableMapOutput {
	return o
}

func (o ReferenceTableMapOutput) ToReferenceTableMapOutputWithContext(ctx context.Context) ReferenceTableMapOutput {
	return o
}

func (o ReferenceTableMapOutput) MapIndex(k pulumi.StringInput) ReferenceTableOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *ReferenceTable {
		return vs[0].(map[string]*ReferenceTable)[vs[1].(string)]
	}).(ReferenceTableOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*ReferenceTableInput)(nil)).Elem(), &ReferenceTable{})
	pulumi.RegisterInputType(reflect.TypeOf((*ReferenceTableArrayInput)(nil)).Elem(), ReferenceTableArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*ReferenceTableMapInput)(nil)).Elem(), ReferenceTableMap{})
	pulumi.RegisterOutputType(ReferenceTableOutput{})
	pulumi.RegisterOutputType(ReferenceTableArrayOutput{})
	pulumi.RegisterOutputType(ReferenceTableMapOutput{})
}
