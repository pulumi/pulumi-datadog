// Code generated by pulumi-language-go DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package datadog

import (
	"context"
	"reflect"

	"errors"
	"github.com/pulumi/pulumi-datadog/sdk/v4/go/datadog/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// Provides a Datadog DeploymentGate resource. This can be used to create and manage Datadog deployment_gate.
//
// ## Example Usage
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi-datadog/sdk/v4/go/datadog"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			// Create new deployment_gate resource
//			_, err := datadog.NewDeploymentGate(ctx, "foo", &datadog.DeploymentGateArgs{
//				DryRun:     pulumi.Bool(false),
//				Env:        pulumi.String("production"),
//				Identifier: pulumi.String("my-gate"),
//				Service:    pulumi.String("my-service"),
//				Rules: datadog.DeploymentGateRuleArray{
//					&datadog.DeploymentGateRuleArgs{
//						Name:   pulumi.String("fdd"),
//						Type:   pulumi.String("faulty_deployment_detection"),
//						DryRun: pulumi.Bool(false),
//						Options: datadog.DeploymentGateRuleOptionsArgs{
//							map[string]interface{}{
//								"duration": 1300,
//								"excludedResources": []string{
//									"GET api/v1/test",
//								},
//							},
//						},
//					},
//					&datadog.DeploymentGateRuleArgs{
//						Name:   pulumi.String("monitor"),
//						Type:   pulumi.String("monitor"),
//						DryRun: pulumi.Bool(false),
//						Options: datadog.DeploymentGateRuleOptionsArgs{
//							map[string]interface{}{
//								"query":    "service:test-service",
//								"duration": 1300,
//							},
//						},
//					},
//				},
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// ## Import
//
// The `pulumi import` command can be used, for example:
//
// ```sh
// $ pulumi import datadog:index/deploymentGate:DeploymentGate new_list ""
// ```
type DeploymentGate struct {
	pulumi.CustomResourceState

	// Creation timestamp of the deployment gate.
	CreatedAt pulumi.StringOutput `pulumi:"createdAt"`
	// Enable Dry Run to test gate behavior without impacting deployments. The evaluation of a dry run gate always responds with a pass status, but the in-app result is the real status based on rules evaluation. This is particularly useful when performing an initial evaluation of the gate behavior without impacting the deployment pipeline.
	DryRun pulumi.BoolOutput `pulumi:"dryRun"`
	// The target environment (example: dev).
	Env pulumi.StringOutput `pulumi:"env"`
	// Unique name for multiple gates on the same service/environment.
	Identifier pulumi.StringOutput `pulumi:"identifier"`
	// Deployment rules for this gate.
	Rules DeploymentGateRuleArrayOutput `pulumi:"rules"`
	// The service name (example: transaction-backend).
	Service pulumi.StringOutput `pulumi:"service"`
	// Last update timestamp of the deployment gate.
	UpdatedAt pulumi.StringOutput `pulumi:"updatedAt"`
}

// NewDeploymentGate registers a new resource with the given unique name, arguments, and options.
func NewDeploymentGate(ctx *pulumi.Context,
	name string, args *DeploymentGateArgs, opts ...pulumi.ResourceOption) (*DeploymentGate, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.Env == nil {
		return nil, errors.New("invalid value for required argument 'Env'")
	}
	if args.Service == nil {
		return nil, errors.New("invalid value for required argument 'Service'")
	}
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource DeploymentGate
	err := ctx.RegisterResource("datadog:index/deploymentGate:DeploymentGate", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetDeploymentGate gets an existing DeploymentGate resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetDeploymentGate(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *DeploymentGateState, opts ...pulumi.ResourceOption) (*DeploymentGate, error) {
	var resource DeploymentGate
	err := ctx.ReadResource("datadog:index/deploymentGate:DeploymentGate", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering DeploymentGate resources.
type deploymentGateState struct {
	// Creation timestamp of the deployment gate.
	CreatedAt *string `pulumi:"createdAt"`
	// Enable Dry Run to test gate behavior without impacting deployments. The evaluation of a dry run gate always responds with a pass status, but the in-app result is the real status based on rules evaluation. This is particularly useful when performing an initial evaluation of the gate behavior without impacting the deployment pipeline.
	DryRun *bool `pulumi:"dryRun"`
	// The target environment (example: dev).
	Env *string `pulumi:"env"`
	// Unique name for multiple gates on the same service/environment.
	Identifier *string `pulumi:"identifier"`
	// Deployment rules for this gate.
	Rules []DeploymentGateRule `pulumi:"rules"`
	// The service name (example: transaction-backend).
	Service *string `pulumi:"service"`
	// Last update timestamp of the deployment gate.
	UpdatedAt *string `pulumi:"updatedAt"`
}

type DeploymentGateState struct {
	// Creation timestamp of the deployment gate.
	CreatedAt pulumi.StringPtrInput
	// Enable Dry Run to test gate behavior without impacting deployments. The evaluation of a dry run gate always responds with a pass status, but the in-app result is the real status based on rules evaluation. This is particularly useful when performing an initial evaluation of the gate behavior without impacting the deployment pipeline.
	DryRun pulumi.BoolPtrInput
	// The target environment (example: dev).
	Env pulumi.StringPtrInput
	// Unique name for multiple gates on the same service/environment.
	Identifier pulumi.StringPtrInput
	// Deployment rules for this gate.
	Rules DeploymentGateRuleArrayInput
	// The service name (example: transaction-backend).
	Service pulumi.StringPtrInput
	// Last update timestamp of the deployment gate.
	UpdatedAt pulumi.StringPtrInput
}

func (DeploymentGateState) ElementType() reflect.Type {
	return reflect.TypeOf((*deploymentGateState)(nil)).Elem()
}

type deploymentGateArgs struct {
	// Enable Dry Run to test gate behavior without impacting deployments. The evaluation of a dry run gate always responds with a pass status, but the in-app result is the real status based on rules evaluation. This is particularly useful when performing an initial evaluation of the gate behavior without impacting the deployment pipeline.
	DryRun *bool `pulumi:"dryRun"`
	// The target environment (example: dev).
	Env string `pulumi:"env"`
	// Unique name for multiple gates on the same service/environment.
	Identifier *string `pulumi:"identifier"`
	// Deployment rules for this gate.
	Rules []DeploymentGateRule `pulumi:"rules"`
	// The service name (example: transaction-backend).
	Service string `pulumi:"service"`
}

// The set of arguments for constructing a DeploymentGate resource.
type DeploymentGateArgs struct {
	// Enable Dry Run to test gate behavior without impacting deployments. The evaluation of a dry run gate always responds with a pass status, but the in-app result is the real status based on rules evaluation. This is particularly useful when performing an initial evaluation of the gate behavior without impacting the deployment pipeline.
	DryRun pulumi.BoolPtrInput
	// The target environment (example: dev).
	Env pulumi.StringInput
	// Unique name for multiple gates on the same service/environment.
	Identifier pulumi.StringPtrInput
	// Deployment rules for this gate.
	Rules DeploymentGateRuleArrayInput
	// The service name (example: transaction-backend).
	Service pulumi.StringInput
}

func (DeploymentGateArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*deploymentGateArgs)(nil)).Elem()
}

type DeploymentGateInput interface {
	pulumi.Input

	ToDeploymentGateOutput() DeploymentGateOutput
	ToDeploymentGateOutputWithContext(ctx context.Context) DeploymentGateOutput
}

func (*DeploymentGate) ElementType() reflect.Type {
	return reflect.TypeOf((**DeploymentGate)(nil)).Elem()
}

func (i *DeploymentGate) ToDeploymentGateOutput() DeploymentGateOutput {
	return i.ToDeploymentGateOutputWithContext(context.Background())
}

func (i *DeploymentGate) ToDeploymentGateOutputWithContext(ctx context.Context) DeploymentGateOutput {
	return pulumi.ToOutputWithContext(ctx, i).(DeploymentGateOutput)
}

// DeploymentGateArrayInput is an input type that accepts DeploymentGateArray and DeploymentGateArrayOutput values.
// You can construct a concrete instance of `DeploymentGateArrayInput` via:
//
//	DeploymentGateArray{ DeploymentGateArgs{...} }
type DeploymentGateArrayInput interface {
	pulumi.Input

	ToDeploymentGateArrayOutput() DeploymentGateArrayOutput
	ToDeploymentGateArrayOutputWithContext(context.Context) DeploymentGateArrayOutput
}

type DeploymentGateArray []DeploymentGateInput

func (DeploymentGateArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*DeploymentGate)(nil)).Elem()
}

func (i DeploymentGateArray) ToDeploymentGateArrayOutput() DeploymentGateArrayOutput {
	return i.ToDeploymentGateArrayOutputWithContext(context.Background())
}

func (i DeploymentGateArray) ToDeploymentGateArrayOutputWithContext(ctx context.Context) DeploymentGateArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(DeploymentGateArrayOutput)
}

// DeploymentGateMapInput is an input type that accepts DeploymentGateMap and DeploymentGateMapOutput values.
// You can construct a concrete instance of `DeploymentGateMapInput` via:
//
//	DeploymentGateMap{ "key": DeploymentGateArgs{...} }
type DeploymentGateMapInput interface {
	pulumi.Input

	ToDeploymentGateMapOutput() DeploymentGateMapOutput
	ToDeploymentGateMapOutputWithContext(context.Context) DeploymentGateMapOutput
}

type DeploymentGateMap map[string]DeploymentGateInput

func (DeploymentGateMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*DeploymentGate)(nil)).Elem()
}

func (i DeploymentGateMap) ToDeploymentGateMapOutput() DeploymentGateMapOutput {
	return i.ToDeploymentGateMapOutputWithContext(context.Background())
}

func (i DeploymentGateMap) ToDeploymentGateMapOutputWithContext(ctx context.Context) DeploymentGateMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(DeploymentGateMapOutput)
}

type DeploymentGateOutput struct{ *pulumi.OutputState }

func (DeploymentGateOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**DeploymentGate)(nil)).Elem()
}

func (o DeploymentGateOutput) ToDeploymentGateOutput() DeploymentGateOutput {
	return o
}

func (o DeploymentGateOutput) ToDeploymentGateOutputWithContext(ctx context.Context) DeploymentGateOutput {
	return o
}

// Creation timestamp of the deployment gate.
func (o DeploymentGateOutput) CreatedAt() pulumi.StringOutput {
	return o.ApplyT(func(v *DeploymentGate) pulumi.StringOutput { return v.CreatedAt }).(pulumi.StringOutput)
}

// Enable Dry Run to test gate behavior without impacting deployments. The evaluation of a dry run gate always responds with a pass status, but the in-app result is the real status based on rules evaluation. This is particularly useful when performing an initial evaluation of the gate behavior without impacting the deployment pipeline.
func (o DeploymentGateOutput) DryRun() pulumi.BoolOutput {
	return o.ApplyT(func(v *DeploymentGate) pulumi.BoolOutput { return v.DryRun }).(pulumi.BoolOutput)
}

// The target environment (example: dev).
func (o DeploymentGateOutput) Env() pulumi.StringOutput {
	return o.ApplyT(func(v *DeploymentGate) pulumi.StringOutput { return v.Env }).(pulumi.StringOutput)
}

// Unique name for multiple gates on the same service/environment.
func (o DeploymentGateOutput) Identifier() pulumi.StringOutput {
	return o.ApplyT(func(v *DeploymentGate) pulumi.StringOutput { return v.Identifier }).(pulumi.StringOutput)
}

// Deployment rules for this gate.
func (o DeploymentGateOutput) Rules() DeploymentGateRuleArrayOutput {
	return o.ApplyT(func(v *DeploymentGate) DeploymentGateRuleArrayOutput { return v.Rules }).(DeploymentGateRuleArrayOutput)
}

// The service name (example: transaction-backend).
func (o DeploymentGateOutput) Service() pulumi.StringOutput {
	return o.ApplyT(func(v *DeploymentGate) pulumi.StringOutput { return v.Service }).(pulumi.StringOutput)
}

// Last update timestamp of the deployment gate.
func (o DeploymentGateOutput) UpdatedAt() pulumi.StringOutput {
	return o.ApplyT(func(v *DeploymentGate) pulumi.StringOutput { return v.UpdatedAt }).(pulumi.StringOutput)
}

type DeploymentGateArrayOutput struct{ *pulumi.OutputState }

func (DeploymentGateArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*DeploymentGate)(nil)).Elem()
}

func (o DeploymentGateArrayOutput) ToDeploymentGateArrayOutput() DeploymentGateArrayOutput {
	return o
}

func (o DeploymentGateArrayOutput) ToDeploymentGateArrayOutputWithContext(ctx context.Context) DeploymentGateArrayOutput {
	return o
}

func (o DeploymentGateArrayOutput) Index(i pulumi.IntInput) DeploymentGateOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *DeploymentGate {
		return vs[0].([]*DeploymentGate)[vs[1].(int)]
	}).(DeploymentGateOutput)
}

type DeploymentGateMapOutput struct{ *pulumi.OutputState }

func (DeploymentGateMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*DeploymentGate)(nil)).Elem()
}

func (o DeploymentGateMapOutput) ToDeploymentGateMapOutput() DeploymentGateMapOutput {
	return o
}

func (o DeploymentGateMapOutput) ToDeploymentGateMapOutputWithContext(ctx context.Context) DeploymentGateMapOutput {
	return o
}

func (o DeploymentGateMapOutput) MapIndex(k pulumi.StringInput) DeploymentGateOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *DeploymentGate {
		return vs[0].(map[string]*DeploymentGate)[vs[1].(string)]
	}).(DeploymentGateOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*DeploymentGateInput)(nil)).Elem(), &DeploymentGate{})
	pulumi.RegisterInputType(reflect.TypeOf((*DeploymentGateArrayInput)(nil)).Elem(), DeploymentGateArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*DeploymentGateMapInput)(nil)).Elem(), DeploymentGateMap{})
	pulumi.RegisterOutputType(DeploymentGateOutput{})
	pulumi.RegisterOutputType(DeploymentGateArrayOutput{})
	pulumi.RegisterOutputType(DeploymentGateMapOutput{})
}
