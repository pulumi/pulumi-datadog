# coding=utf-8
# *** WARNING: this file was generated by pulumi-language-python. ***
# *** Do not edit by hand unless you're certain you know what you are doing! ***

import builtins as _builtins
import warnings
import sys
import pulumi
import pulumi.runtime
from typing import Any, Mapping, Optional, Sequence, Union, overload
if sys.version_info >= (3, 11):
    from typing import NotRequired, TypedDict, TypeAlias
else:
    from typing_extensions import NotRequired, TypedDict, TypeAlias
from . import _utilities
from . import outputs
from ._inputs import *

__all__ = ['DeploymentGateArgs', 'DeploymentGate']

@pulumi.input_type
class DeploymentGateArgs:
    def __init__(__self__, *,
                 env: pulumi.Input[_builtins.str],
                 service: pulumi.Input[_builtins.str],
                 dry_run: Optional[pulumi.Input[_builtins.bool]] = None,
                 identifier: Optional[pulumi.Input[_builtins.str]] = None,
                 rules: Optional[pulumi.Input[Sequence[pulumi.Input['DeploymentGateRuleArgs']]]] = None):
        """
        The set of arguments for constructing a DeploymentGate resource.
        :param pulumi.Input[_builtins.str] env: The target environment (example: dev).
        :param pulumi.Input[_builtins.str] service: The service name (example: transaction-backend).
        :param pulumi.Input[_builtins.bool] dry_run: Enable Dry Run to test gate behavior without impacting deployments. The evaluation of a dry run gate always responds with a pass status, but the in-app result is the real status based on rules evaluation. This is particularly useful when performing an initial evaluation of the gate behavior without impacting the deployment pipeline.
        :param pulumi.Input[_builtins.str] identifier: Unique name for multiple gates on the same service/environment.
        :param pulumi.Input[Sequence[pulumi.Input['DeploymentGateRuleArgs']]] rules: Deployment rules for this gate.
        """
        pulumi.set(__self__, "env", env)
        pulumi.set(__self__, "service", service)
        if dry_run is not None:
            pulumi.set(__self__, "dry_run", dry_run)
        if identifier is not None:
            pulumi.set(__self__, "identifier", identifier)
        if rules is not None:
            pulumi.set(__self__, "rules", rules)

    @_builtins.property
    @pulumi.getter
    def env(self) -> pulumi.Input[_builtins.str]:
        """
        The target environment (example: dev).
        """
        return pulumi.get(self, "env")

    @env.setter
    def env(self, value: pulumi.Input[_builtins.str]):
        pulumi.set(self, "env", value)

    @_builtins.property
    @pulumi.getter
    def service(self) -> pulumi.Input[_builtins.str]:
        """
        The service name (example: transaction-backend).
        """
        return pulumi.get(self, "service")

    @service.setter
    def service(self, value: pulumi.Input[_builtins.str]):
        pulumi.set(self, "service", value)

    @_builtins.property
    @pulumi.getter(name="dryRun")
    def dry_run(self) -> Optional[pulumi.Input[_builtins.bool]]:
        """
        Enable Dry Run to test gate behavior without impacting deployments. The evaluation of a dry run gate always responds with a pass status, but the in-app result is the real status based on rules evaluation. This is particularly useful when performing an initial evaluation of the gate behavior without impacting the deployment pipeline.
        """
        return pulumi.get(self, "dry_run")

    @dry_run.setter
    def dry_run(self, value: Optional[pulumi.Input[_builtins.bool]]):
        pulumi.set(self, "dry_run", value)

    @_builtins.property
    @pulumi.getter
    def identifier(self) -> Optional[pulumi.Input[_builtins.str]]:
        """
        Unique name for multiple gates on the same service/environment.
        """
        return pulumi.get(self, "identifier")

    @identifier.setter
    def identifier(self, value: Optional[pulumi.Input[_builtins.str]]):
        pulumi.set(self, "identifier", value)

    @_builtins.property
    @pulumi.getter
    def rules(self) -> Optional[pulumi.Input[Sequence[pulumi.Input['DeploymentGateRuleArgs']]]]:
        """
        Deployment rules for this gate.
        """
        return pulumi.get(self, "rules")

    @rules.setter
    def rules(self, value: Optional[pulumi.Input[Sequence[pulumi.Input['DeploymentGateRuleArgs']]]]):
        pulumi.set(self, "rules", value)


@pulumi.input_type
class _DeploymentGateState:
    def __init__(__self__, *,
                 created_at: Optional[pulumi.Input[_builtins.str]] = None,
                 dry_run: Optional[pulumi.Input[_builtins.bool]] = None,
                 env: Optional[pulumi.Input[_builtins.str]] = None,
                 identifier: Optional[pulumi.Input[_builtins.str]] = None,
                 rules: Optional[pulumi.Input[Sequence[pulumi.Input['DeploymentGateRuleArgs']]]] = None,
                 service: Optional[pulumi.Input[_builtins.str]] = None,
                 updated_at: Optional[pulumi.Input[_builtins.str]] = None):
        """
        Input properties used for looking up and filtering DeploymentGate resources.
        :param pulumi.Input[_builtins.str] created_at: Creation timestamp of the deployment gate.
        :param pulumi.Input[_builtins.bool] dry_run: Enable Dry Run to test gate behavior without impacting deployments. The evaluation of a dry run gate always responds with a pass status, but the in-app result is the real status based on rules evaluation. This is particularly useful when performing an initial evaluation of the gate behavior without impacting the deployment pipeline.
        :param pulumi.Input[_builtins.str] env: The target environment (example: dev).
        :param pulumi.Input[_builtins.str] identifier: Unique name for multiple gates on the same service/environment.
        :param pulumi.Input[Sequence[pulumi.Input['DeploymentGateRuleArgs']]] rules: Deployment rules for this gate.
        :param pulumi.Input[_builtins.str] service: The service name (example: transaction-backend).
        :param pulumi.Input[_builtins.str] updated_at: Last update timestamp of the deployment gate.
        """
        if created_at is not None:
            pulumi.set(__self__, "created_at", created_at)
        if dry_run is not None:
            pulumi.set(__self__, "dry_run", dry_run)
        if env is not None:
            pulumi.set(__self__, "env", env)
        if identifier is not None:
            pulumi.set(__self__, "identifier", identifier)
        if rules is not None:
            pulumi.set(__self__, "rules", rules)
        if service is not None:
            pulumi.set(__self__, "service", service)
        if updated_at is not None:
            pulumi.set(__self__, "updated_at", updated_at)

    @_builtins.property
    @pulumi.getter(name="createdAt")
    def created_at(self) -> Optional[pulumi.Input[_builtins.str]]:
        """
        Creation timestamp of the deployment gate.
        """
        return pulumi.get(self, "created_at")

    @created_at.setter
    def created_at(self, value: Optional[pulumi.Input[_builtins.str]]):
        pulumi.set(self, "created_at", value)

    @_builtins.property
    @pulumi.getter(name="dryRun")
    def dry_run(self) -> Optional[pulumi.Input[_builtins.bool]]:
        """
        Enable Dry Run to test gate behavior without impacting deployments. The evaluation of a dry run gate always responds with a pass status, but the in-app result is the real status based on rules evaluation. This is particularly useful when performing an initial evaluation of the gate behavior without impacting the deployment pipeline.
        """
        return pulumi.get(self, "dry_run")

    @dry_run.setter
    def dry_run(self, value: Optional[pulumi.Input[_builtins.bool]]):
        pulumi.set(self, "dry_run", value)

    @_builtins.property
    @pulumi.getter
    def env(self) -> Optional[pulumi.Input[_builtins.str]]:
        """
        The target environment (example: dev).
        """
        return pulumi.get(self, "env")

    @env.setter
    def env(self, value: Optional[pulumi.Input[_builtins.str]]):
        pulumi.set(self, "env", value)

    @_builtins.property
    @pulumi.getter
    def identifier(self) -> Optional[pulumi.Input[_builtins.str]]:
        """
        Unique name for multiple gates on the same service/environment.
        """
        return pulumi.get(self, "identifier")

    @identifier.setter
    def identifier(self, value: Optional[pulumi.Input[_builtins.str]]):
        pulumi.set(self, "identifier", value)

    @_builtins.property
    @pulumi.getter
    def rules(self) -> Optional[pulumi.Input[Sequence[pulumi.Input['DeploymentGateRuleArgs']]]]:
        """
        Deployment rules for this gate.
        """
        return pulumi.get(self, "rules")

    @rules.setter
    def rules(self, value: Optional[pulumi.Input[Sequence[pulumi.Input['DeploymentGateRuleArgs']]]]):
        pulumi.set(self, "rules", value)

    @_builtins.property
    @pulumi.getter
    def service(self) -> Optional[pulumi.Input[_builtins.str]]:
        """
        The service name (example: transaction-backend).
        """
        return pulumi.get(self, "service")

    @service.setter
    def service(self, value: Optional[pulumi.Input[_builtins.str]]):
        pulumi.set(self, "service", value)

    @_builtins.property
    @pulumi.getter(name="updatedAt")
    def updated_at(self) -> Optional[pulumi.Input[_builtins.str]]:
        """
        Last update timestamp of the deployment gate.
        """
        return pulumi.get(self, "updated_at")

    @updated_at.setter
    def updated_at(self, value: Optional[pulumi.Input[_builtins.str]]):
        pulumi.set(self, "updated_at", value)


@pulumi.type_token("datadog:index/deploymentGate:DeploymentGate")
class DeploymentGate(pulumi.CustomResource):
    @overload
    def __init__(__self__,
                 resource_name: str,
                 opts: Optional[pulumi.ResourceOptions] = None,
                 dry_run: Optional[pulumi.Input[_builtins.bool]] = None,
                 env: Optional[pulumi.Input[_builtins.str]] = None,
                 identifier: Optional[pulumi.Input[_builtins.str]] = None,
                 rules: Optional[pulumi.Input[Sequence[pulumi.Input[Union['DeploymentGateRuleArgs', 'DeploymentGateRuleArgsDict']]]]] = None,
                 service: Optional[pulumi.Input[_builtins.str]] = None,
                 __props__=None):
        """
        Provides a Datadog DeploymentGate resource. This can be used to create and manage Datadog deployment_gate.

        ## Example Usage

        ```python
        import pulumi
        import pulumi_datadog as datadog

        # Create new deployment_gate resource
        foo = datadog.DeploymentGate("foo",
            dry_run=False,
            env="production",
            identifier="my-gate",
            service="my-service",
            rules=[
                {
                    "name": "fdd",
                    "type": "faulty_deployment_detection",
                    "dry_run": False,
                    "options": [{
                        "duration": 1300,
                        "excludedResources": ["GET api/v1/test"],
                    }],
                },
                {
                    "name": "monitor",
                    "type": "monitor",
                    "dry_run": False,
                    "options": [{
                        "query": "service:test-service",
                        "duration": 1300,
                    }],
                },
            ])
        ```

        ## Import

        The `pulumi import` command can be used, for example:

        ```sh
        $ pulumi import datadog:index/deploymentGate:DeploymentGate new_list ""
        ```

        :param str resource_name: The name of the resource.
        :param pulumi.ResourceOptions opts: Options for the resource.
        :param pulumi.Input[_builtins.bool] dry_run: Enable Dry Run to test gate behavior without impacting deployments. The evaluation of a dry run gate always responds with a pass status, but the in-app result is the real status based on rules evaluation. This is particularly useful when performing an initial evaluation of the gate behavior without impacting the deployment pipeline.
        :param pulumi.Input[_builtins.str] env: The target environment (example: dev).
        :param pulumi.Input[_builtins.str] identifier: Unique name for multiple gates on the same service/environment.
        :param pulumi.Input[Sequence[pulumi.Input[Union['DeploymentGateRuleArgs', 'DeploymentGateRuleArgsDict']]]] rules: Deployment rules for this gate.
        :param pulumi.Input[_builtins.str] service: The service name (example: transaction-backend).
        """
        ...
    @overload
    def __init__(__self__,
                 resource_name: str,
                 args: DeploymentGateArgs,
                 opts: Optional[pulumi.ResourceOptions] = None):
        """
        Provides a Datadog DeploymentGate resource. This can be used to create and manage Datadog deployment_gate.

        ## Example Usage

        ```python
        import pulumi
        import pulumi_datadog as datadog

        # Create new deployment_gate resource
        foo = datadog.DeploymentGate("foo",
            dry_run=False,
            env="production",
            identifier="my-gate",
            service="my-service",
            rules=[
                {
                    "name": "fdd",
                    "type": "faulty_deployment_detection",
                    "dry_run": False,
                    "options": [{
                        "duration": 1300,
                        "excludedResources": ["GET api/v1/test"],
                    }],
                },
                {
                    "name": "monitor",
                    "type": "monitor",
                    "dry_run": False,
                    "options": [{
                        "query": "service:test-service",
                        "duration": 1300,
                    }],
                },
            ])
        ```

        ## Import

        The `pulumi import` command can be used, for example:

        ```sh
        $ pulumi import datadog:index/deploymentGate:DeploymentGate new_list ""
        ```

        :param str resource_name: The name of the resource.
        :param DeploymentGateArgs args: The arguments to use to populate this resource's properties.
        :param pulumi.ResourceOptions opts: Options for the resource.
        """
        ...
    def __init__(__self__, resource_name: str, *args, **kwargs):
        resource_args, opts = _utilities.get_resource_args_opts(DeploymentGateArgs, pulumi.ResourceOptions, *args, **kwargs)
        if resource_args is not None:
            __self__._internal_init(resource_name, opts, **resource_args.__dict__)
        else:
            __self__._internal_init(resource_name, *args, **kwargs)

    def _internal_init(__self__,
                 resource_name: str,
                 opts: Optional[pulumi.ResourceOptions] = None,
                 dry_run: Optional[pulumi.Input[_builtins.bool]] = None,
                 env: Optional[pulumi.Input[_builtins.str]] = None,
                 identifier: Optional[pulumi.Input[_builtins.str]] = None,
                 rules: Optional[pulumi.Input[Sequence[pulumi.Input[Union['DeploymentGateRuleArgs', 'DeploymentGateRuleArgsDict']]]]] = None,
                 service: Optional[pulumi.Input[_builtins.str]] = None,
                 __props__=None):
        opts = pulumi.ResourceOptions.merge(_utilities.get_resource_opts_defaults(), opts)
        if not isinstance(opts, pulumi.ResourceOptions):
            raise TypeError('Expected resource options to be a ResourceOptions instance')
        if opts.id is None:
            if __props__ is not None:
                raise TypeError('__props__ is only valid when passed in combination with a valid opts.id to get an existing resource')
            __props__ = DeploymentGateArgs.__new__(DeploymentGateArgs)

            __props__.__dict__["dry_run"] = dry_run
            if env is None and not opts.urn:
                raise TypeError("Missing required property 'env'")
            __props__.__dict__["env"] = env
            __props__.__dict__["identifier"] = identifier
            __props__.__dict__["rules"] = rules
            if service is None and not opts.urn:
                raise TypeError("Missing required property 'service'")
            __props__.__dict__["service"] = service
            __props__.__dict__["created_at"] = None
            __props__.__dict__["updated_at"] = None
        super(DeploymentGate, __self__).__init__(
            'datadog:index/deploymentGate:DeploymentGate',
            resource_name,
            __props__,
            opts)

    @staticmethod
    def get(resource_name: str,
            id: pulumi.Input[str],
            opts: Optional[pulumi.ResourceOptions] = None,
            created_at: Optional[pulumi.Input[_builtins.str]] = None,
            dry_run: Optional[pulumi.Input[_builtins.bool]] = None,
            env: Optional[pulumi.Input[_builtins.str]] = None,
            identifier: Optional[pulumi.Input[_builtins.str]] = None,
            rules: Optional[pulumi.Input[Sequence[pulumi.Input[Union['DeploymentGateRuleArgs', 'DeploymentGateRuleArgsDict']]]]] = None,
            service: Optional[pulumi.Input[_builtins.str]] = None,
            updated_at: Optional[pulumi.Input[_builtins.str]] = None) -> 'DeploymentGate':
        """
        Get an existing DeploymentGate resource's state with the given name, id, and optional extra
        properties used to qualify the lookup.

        :param str resource_name: The unique name of the resulting resource.
        :param pulumi.Input[str] id: The unique provider ID of the resource to lookup.
        :param pulumi.ResourceOptions opts: Options for the resource.
        :param pulumi.Input[_builtins.str] created_at: Creation timestamp of the deployment gate.
        :param pulumi.Input[_builtins.bool] dry_run: Enable Dry Run to test gate behavior without impacting deployments. The evaluation of a dry run gate always responds with a pass status, but the in-app result is the real status based on rules evaluation. This is particularly useful when performing an initial evaluation of the gate behavior without impacting the deployment pipeline.
        :param pulumi.Input[_builtins.str] env: The target environment (example: dev).
        :param pulumi.Input[_builtins.str] identifier: Unique name for multiple gates on the same service/environment.
        :param pulumi.Input[Sequence[pulumi.Input[Union['DeploymentGateRuleArgs', 'DeploymentGateRuleArgsDict']]]] rules: Deployment rules for this gate.
        :param pulumi.Input[_builtins.str] service: The service name (example: transaction-backend).
        :param pulumi.Input[_builtins.str] updated_at: Last update timestamp of the deployment gate.
        """
        opts = pulumi.ResourceOptions.merge(opts, pulumi.ResourceOptions(id=id))

        __props__ = _DeploymentGateState.__new__(_DeploymentGateState)

        __props__.__dict__["created_at"] = created_at
        __props__.__dict__["dry_run"] = dry_run
        __props__.__dict__["env"] = env
        __props__.__dict__["identifier"] = identifier
        __props__.__dict__["rules"] = rules
        __props__.__dict__["service"] = service
        __props__.__dict__["updated_at"] = updated_at
        return DeploymentGate(resource_name, opts=opts, __props__=__props__)

    @_builtins.property
    @pulumi.getter(name="createdAt")
    def created_at(self) -> pulumi.Output[_builtins.str]:
        """
        Creation timestamp of the deployment gate.
        """
        return pulumi.get(self, "created_at")

    @_builtins.property
    @pulumi.getter(name="dryRun")
    def dry_run(self) -> pulumi.Output[_builtins.bool]:
        """
        Enable Dry Run to test gate behavior without impacting deployments. The evaluation of a dry run gate always responds with a pass status, but the in-app result is the real status based on rules evaluation. This is particularly useful when performing an initial evaluation of the gate behavior without impacting the deployment pipeline.
        """
        return pulumi.get(self, "dry_run")

    @_builtins.property
    @pulumi.getter
    def env(self) -> pulumi.Output[_builtins.str]:
        """
        The target environment (example: dev).
        """
        return pulumi.get(self, "env")

    @_builtins.property
    @pulumi.getter
    def identifier(self) -> pulumi.Output[_builtins.str]:
        """
        Unique name for multiple gates on the same service/environment.
        """
        return pulumi.get(self, "identifier")

    @_builtins.property
    @pulumi.getter
    def rules(self) -> pulumi.Output[Optional[Sequence['outputs.DeploymentGateRule']]]:
        """
        Deployment rules for this gate.
        """
        return pulumi.get(self, "rules")

    @_builtins.property
    @pulumi.getter
    def service(self) -> pulumi.Output[_builtins.str]:
        """
        The service name (example: transaction-backend).
        """
        return pulumi.get(self, "service")

    @_builtins.property
    @pulumi.getter(name="updatedAt")
    def updated_at(self) -> pulumi.Output[_builtins.str]:
        """
        Last update timestamp of the deployment gate.
        """
        return pulumi.get(self, "updated_at")

