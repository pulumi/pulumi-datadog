// *** WARNING: this file was generated by pulumi-language-dotnet. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

using System;
using System.Collections.Generic;
using System.Collections.Immutable;
using System.Threading.Tasks;
using Pulumi.Serialization;

namespace Pulumi.Datadog
{
    /// <summary>
    /// Provides a Datadog Tag Pipeline Ruleset Order resource that can be used to manage the order of Tag Pipeline Rulesets.
    /// 
    /// ## Example Usage
    /// 
    /// ```csharp
    /// using System.Collections.Generic;
    /// using System.Linq;
    /// using Pulumi;
    /// using Datadog = Pulumi.Datadog;
    /// 
    /// return await Deployment.RunAsync(() =&gt; 
    /// {
    ///     // ============================================================================
    ///     // Example 1: Basic Usage - Manage the order of tag pipeline rulesets
    ///     // ============================================================================
    ///     // This example shows the default behavior where UI-defined rulesets that are
    ///     // not in Terraform will be preserved at the end of the order.
    ///     var first = new Datadog.TagPipelineRuleset("first", new()
    ///     {
    ///         Name = "Standardize Environment Tags",
    ///         Enabled = true,
    ///         Rules = new[]
    ///         {
    ///             new Datadog.Inputs.TagPipelineRulesetRuleArgs
    ///             {
    ///                 Name = "map-env",
    ///                 Enabled = true,
    ///                 Mapping = new[]
    ///                 {
    ///                     
    ///                     {
    ///                         { "destinationKey", "env" },
    ///                         { "ifNotExists", true },
    ///                         { "sourceKeys", new[]
    ///                         {
    ///                             "environment",
    ///                             "stage",
    ///                         } },
    ///                     },
    ///                 },
    ///             },
    ///         },
    ///     });
    /// 
    ///     var second = new Datadog.TagPipelineRuleset("second", new()
    ///     {
    ///         Name = "Assign Team Tags",
    ///         Enabled = true,
    ///         Rules = new[]
    ///         {
    ///             new Datadog.Inputs.TagPipelineRulesetRuleArgs
    ///             {
    ///                 Name = "assign-team",
    ///                 Enabled = true,
    ///                 Query = new[]
    ///                 {
    ///                     
    ///                     {
    ///                         { "query", "service:web* OR service:api*" },
    ///                         { "ifNotExists", false },
    ///                         { "addition", new[]
    ///                         {
    ///                             
    ///                             {
    ///                                 { "key", "team" },
    ///                                 { "value", "backend" },
    ///                             },
    ///                         } },
    ///                     },
    ///                 },
    ///             },
    ///         },
    ///     });
    /// 
    ///     var third = new Datadog.TagPipelineRuleset("third", new()
    ///     {
    ///         Name = "Enrich Service Metadata",
    ///         Enabled = true,
    ///         Rules = new[]
    ///         {
    ///             new Datadog.Inputs.TagPipelineRulesetRuleArgs
    ///             {
    ///                 Name = "lookup-service",
    ///                 Enabled = true,
    ///                 ReferenceTable = new[]
    ///                 {
    ///                     
    ///                     {
    ///                         { "tableName", "service_catalog" },
    ///                         { "caseInsensitivity", true },
    ///                         { "ifNotExists", true },
    ///                         { "sourceKeys", new[]
    ///                         {
    ///                             "service",
    ///                         } },
    ///                         { "fieldPairs", new[]
    ///                         {
    ///                             
    ///                             {
    ///                                 { "inputColumn", "owner_team" },
    ///                                 { "outputKey", "owner" },
    ///                             },
    ///                         } },
    ///                     },
    ///                 },
    ///             },
    ///         },
    ///     });
    /// 
    ///     // Manage the order of tag pipeline rulesets
    ///     // Rulesets are executed in the order specified in ruleset_ids
    ///     // UI-defined rulesets not in this list will be preserved at the end
    ///     var order = new Datadog.TagPipelineRulesets("order", new()
    ///     {
    ///         RulesetIds = new[]
    ///         {
    ///             first.Id,
    ///             second.Id,
    ///             third.Id,
    ///         },
    ///     });
    /// 
    ///     // ============================================================================
    ///     // Example 2: Override UI-defined rulesets (override_ui_defined_resources = true)
    ///     // ============================================================================
    ///     // When set to true, any rulesets created via the UI that are not defined in Terraform
    ///     // will be automatically deleted during pulumi up.
    ///     var managedFirst = new Datadog.TagPipelineRuleset("managed_first", new()
    ///     {
    ///         Name = "Standardize Environment Tags",
    ///         Enabled = true,
    ///         Rules = new[]
    ///         {
    ///             new Datadog.Inputs.TagPipelineRulesetRuleArgs
    ///             {
    ///                 Name = "map-env",
    ///                 Enabled = true,
    ///                 Mapping = new[]
    ///                 {
    ///                     
    ///                     {
    ///                         { "destinationKey", "env" },
    ///                         { "ifNotExists", true },
    ///                         { "sourceKeys", new[]
    ///                         {
    ///                             "environment",
    ///                             "stage",
    ///                         } },
    ///                     },
    ///                 },
    ///             },
    ///         },
    ///     });
    /// 
    ///     var managedSecond = new Datadog.TagPipelineRuleset("managed_second", new()
    ///     {
    ///         Name = "Assign Team Tags",
    ///         Enabled = true,
    ///         Rules = new[]
    ///         {
    ///             new Datadog.Inputs.TagPipelineRulesetRuleArgs
    ///             {
    ///                 Name = "assign-team",
    ///                 Enabled = true,
    ///                 Query = new[]
    ///                 {
    ///                     
    ///                     {
    ///                         { "query", "service:web*" },
    ///                         { "ifNotExists", false },
    ///                         { "addition", new[]
    ///                         {
    ///                             
    ///                             {
    ///                                 { "key", "team" },
    ///                                 { "value", "frontend" },
    ///                             },
    ///                         } },
    ///                     },
    ///                 },
    ///             },
    ///         },
    ///     });
    /// 
    ///     // Manage order with override_ui_defined_resources = true
    ///     // This will delete any rulesets created via the UI that are not in this list
    ///     var orderOverride = new Datadog.TagPipelineRulesets("order_override", new()
    ///     {
    ///         OverrideUiDefinedResources = true,
    ///         RulesetIds = new[]
    ///         {
    ///             managedFirst.Id,
    ///             managedSecond.Id,
    ///         },
    ///     });
    /// 
    ///     // ============================================================================
    ///     // Example 3: Preserve UI-defined rulesets (override_ui_defined_resources = false)
    ///     // ============================================================================
    ///     // When set to false (default), UI-defined rulesets that are not in Terraform
    ///     // will be preserved at the end of the order. However, if unmanaged rulesets
    ///     // are in the middle of the order, Terraform will error and require you to either:
    ///     // 1. Import the unmanaged rulesets
    ///     // 2. Set override_ui_defined_resources = true
    ///     // 3. Manually reorder or delete them in the Datadog UI
    ///     var preserveFirst = new Datadog.TagPipelineRuleset("preserve_first", new()
    ///     {
    ///         Name = "Standardize Environment Tags",
    ///         Enabled = true,
    ///         Rules = new[]
    ///         {
    ///             new Datadog.Inputs.TagPipelineRulesetRuleArgs
    ///             {
    ///                 Name = "map-env",
    ///                 Enabled = true,
    ///                 Mapping = new[]
    ///                 {
    ///                     
    ///                     {
    ///                         { "destinationKey", "env" },
    ///                         { "ifNotExists", true },
    ///                         { "sourceKeys", new[]
    ///                         {
    ///                             "environment",
    ///                             "stage",
    ///                         } },
    ///                     },
    ///                 },
    ///             },
    ///         },
    ///     });
    /// 
    ///     var preserveSecond = new Datadog.TagPipelineRuleset("preserve_second", new()
    ///     {
    ///         Name = "Assign Team Tags",
    ///         Enabled = true,
    ///         Rules = new[]
    ///         {
    ///             new Datadog.Inputs.TagPipelineRulesetRuleArgs
    ///             {
    ///                 Name = "assign-team",
    ///                 Enabled = true,
    ///                 Query = new[]
    ///                 {
    ///                     
    ///                     {
    ///                         { "query", "service:web*" },
    ///                         { "ifNotExists", false },
    ///                         { "addition", new[]
    ///                         {
    ///                             
    ///                             {
    ///                                 { "key", "team" },
    ///                                 { "value", "frontend" },
    ///                             },
    ///                         } },
    ///                     },
    ///                 },
    ///             },
    ///         },
    ///     });
    /// 
    ///     // Manage order with override_ui_defined_resources = false (default)
    ///     // UI-defined rulesets will be preserved at the end of the order
    ///     // Terraform will warn if unmanaged rulesets exist at the end
    ///     // Terraform will error if unmanaged rulesets are in the middle
    ///     var orderPreserve = new Datadog.TagPipelineRulesets("order_preserve", new()
    ///     {
    ///         OverrideUiDefinedResources = false,
    ///         RulesetIds = new[]
    ///         {
    ///             preserveFirst.Id,
    ///             preserveSecond.Id,
    ///         },
    ///     });
    /// 
    /// });
    /// ```
    /// 
    /// ## Import
    /// 
    /// The `pulumi import` command can be used, for example:
    /// 
    /// ```sh
    /// $ pulumi import datadog:index/tagPipelineRulesets:TagPipelineRulesets my_rulesets order
    /// ```
    /// </summary>
    [DatadogResourceType("datadog:index/tagPipelineRulesets:TagPipelineRulesets")]
    public partial class TagPipelineRulesets : global::Pulumi.CustomResource
    {
        /// <summary>
        /// Whether to override UI-defined rulesets. When set to true, any rulesets created via the UI that are not defined in Terraform will be deleted and Terraform will be used as the source of truth for rules and their ordering. When set to false, any rulesets created via the UI that are at the end of order will be kept but will be warned, otherwise an error will be thrown in pulumi preview phase. Default is false
        /// </summary>
        [Output("overrideUiDefinedResources")]
        public Output<bool?> OverrideUiDefinedResources { get; private set; } = null!;

        /// <summary>
        /// The list of Tag Pipeline Ruleset IDs, in order. Rulesets are executed in the order specified in this list.
        /// </summary>
        [Output("rulesetIds")]
        public Output<ImmutableArray<string>> RulesetIds { get; private set; } = null!;


        /// <summary>
        /// Create a TagPipelineRulesets resource with the given unique name, arguments, and options.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resource</param>
        /// <param name="args">The arguments used to populate this resource's properties</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public TagPipelineRulesets(string name, TagPipelineRulesetsArgs args, CustomResourceOptions? options = null)
            : base("datadog:index/tagPipelineRulesets:TagPipelineRulesets", name, args ?? new TagPipelineRulesetsArgs(), MakeResourceOptions(options, ""))
        {
        }

        private TagPipelineRulesets(string name, Input<string> id, TagPipelineRulesetsState? state = null, CustomResourceOptions? options = null)
            : base("datadog:index/tagPipelineRulesets:TagPipelineRulesets", name, state, MakeResourceOptions(options, id))
        {
        }

        private static CustomResourceOptions MakeResourceOptions(CustomResourceOptions? options, Input<string>? id)
        {
            var defaultOptions = new CustomResourceOptions
            {
                Version = Utilities.Version,
            };
            var merged = CustomResourceOptions.Merge(defaultOptions, options);
            // Override the ID if one was specified for consistency with other language SDKs.
            merged.Id = id ?? merged.Id;
            return merged;
        }
        /// <summary>
        /// Get an existing TagPipelineRulesets resource's state with the given name, ID, and optional extra
        /// properties used to qualify the lookup.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resulting resource.</param>
        /// <param name="id">The unique provider ID of the resource to lookup.</param>
        /// <param name="state">Any extra arguments used during the lookup.</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public static TagPipelineRulesets Get(string name, Input<string> id, TagPipelineRulesetsState? state = null, CustomResourceOptions? options = null)
        {
            return new TagPipelineRulesets(name, id, state, options);
        }
    }

    public sealed class TagPipelineRulesetsArgs : global::Pulumi.ResourceArgs
    {
        /// <summary>
        /// Whether to override UI-defined rulesets. When set to true, any rulesets created via the UI that are not defined in Terraform will be deleted and Terraform will be used as the source of truth for rules and their ordering. When set to false, any rulesets created via the UI that are at the end of order will be kept but will be warned, otherwise an error will be thrown in pulumi preview phase. Default is false
        /// </summary>
        [Input("overrideUiDefinedResources")]
        public Input<bool>? OverrideUiDefinedResources { get; set; }

        [Input("rulesetIds", required: true)]
        private InputList<string>? _rulesetIds;

        /// <summary>
        /// The list of Tag Pipeline Ruleset IDs, in order. Rulesets are executed in the order specified in this list.
        /// </summary>
        public InputList<string> RulesetIds
        {
            get => _rulesetIds ?? (_rulesetIds = new InputList<string>());
            set => _rulesetIds = value;
        }

        public TagPipelineRulesetsArgs()
        {
        }
        public static new TagPipelineRulesetsArgs Empty => new TagPipelineRulesetsArgs();
    }

    public sealed class TagPipelineRulesetsState : global::Pulumi.ResourceArgs
    {
        /// <summary>
        /// Whether to override UI-defined rulesets. When set to true, any rulesets created via the UI that are not defined in Terraform will be deleted and Terraform will be used as the source of truth for rules and their ordering. When set to false, any rulesets created via the UI that are at the end of order will be kept but will be warned, otherwise an error will be thrown in pulumi preview phase. Default is false
        /// </summary>
        [Input("overrideUiDefinedResources")]
        public Input<bool>? OverrideUiDefinedResources { get; set; }

        [Input("rulesetIds")]
        private InputList<string>? _rulesetIds;

        /// <summary>
        /// The list of Tag Pipeline Ruleset IDs, in order. Rulesets are executed in the order specified in this list.
        /// </summary>
        public InputList<string> RulesetIds
        {
            get => _rulesetIds ?? (_rulesetIds = new InputList<string>());
            set => _rulesetIds = value;
        }

        public TagPipelineRulesetsState()
        {
        }
        public static new TagPipelineRulesetsState Empty => new TagPipelineRulesetsState();
    }
}
